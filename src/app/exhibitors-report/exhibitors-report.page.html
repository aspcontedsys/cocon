<ion-header>
  <ion-toolbar>
    <div class="toolbar-left">
      <ion-button fill="clear" (click)="goBack()" slot="start">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
      <span class="page-title">Exhibitors Report</span>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="exhibitors-content">
  <div class="exhibitors-wrapper">

    <!-- Action Row -->
    <div class="action-row">
      <ion-datetime-button #dateButton datetime="dateFilter"></ion-datetime-button>
      <ion-modal [keepContentsMounted]="true" #dateModal>
        <ng-template>
          <ion-datetime
            id="dateFilter"
            presentation="date"
            [highlightedDates]="highlightedDates"
            [isDateEnabled]="isDateEnabledFn"
            (ionChange)="filterByDate($event)">
          </ion-datetime>
        </ng-template>
      </ion-modal>

      <ion-button fill="clear" (click)="exportCSV()">
        <ion-icon name="download-outline"></ion-icon>
      </ion-button>
    </div>

    <!-- Selected date info -->
    <div class="date-info" *ngIf="selectedDate">
      <span>Showing report for: <strong>{{ selectedDate }}</strong></span>
      <ion-button fill="clear" size="small" color="light" (click)="clearFilter()">Clear</ion-button>
    </div>

    <!-- Exhibitors List -->
    <ion-list class="exhibitors-list" *ngIf="filteredExhibitors.length > 0">
      <ion-item *ngFor="let user of filteredExhibitors">
        <ion-avatar slot="start">
          <ion-icon name="person-circle-outline" class="avatar-icon"></ion-icon>
        </ion-avatar>
        <ion-label>
          <h2>{{ user.name }}</h2>
          <p>{{ user.company_name }}</p>
          <p class="phone">{{ user.email }}</p>
        </ion-label>
      </ion-item>
    </ion-list>

    <!-- No Report Found Message -->
    <div class="no-report" *ngIf="filteredExhibitors.length === 0">
      <ion-icon name="alert-circle-outline"></ion-icon>
      <p>No report found for the selected date</p>
    </div>

  </div>
</ion-content>
